---
layout: post
title:  "Hello MIPS"
author: "Santiago Trini"
categories: orga
tags: [mips,orga]
image: code2.png
date:   2020-08-11 23:00:00 -0300
published: false
---

Una introducción a la programación en _assembler_ de MIPS usando SPIM.
Todo el código disponible en [GitHub](https://github.com/santiagotrini).

## La arquitectura MIPS

El nombre MIPS engloba a una familia de microprocesadores. Nosotros vamos a programar en una versión de MIPS de 32 bits. O sea que el ancho del bus de datos es de 32 bits o 4 bytes. El tamaño de cada instrucción también es de 32 bits. Decimos que una palabra de memoria o _memory word_ también son 4 bytes. Una palabra puede ser una instrucción, un entero de 32 bits (complemento a dos), cuatro caracteres en ASCII o alguna otra cosa que se pueda codificar con un número.

MIPS es una arquitectura RISC de _reduced instruction set computer_ o computadora de conjunto de instrucciones reducido. Lo contrario a esto sería una arquitectura CISC, el ejemplo más conocido es la arquitectura de Intel a la que nos referimos de manera general como x86 por el primer microprocesador de esta arquitectura, el 8086.

Para darnos una idea de qué significa esto comparemos la cantidad de instrucciones. El 8086 de 1978 tenía 117 instrucciones, y usaba una arquitectura de 16 bits. La arquitectura de Intel se fue extendiendo con el pasar de los años y el microprocesador de la computadora desde donde escribo esto, ya con 64 bits en el bus de datos, supera las 1500 instrucciones. En cambio en MIPS llegamos a unas 60 instrucciones como mucho. El número exacto depende claro de que versión de la arquitectura estamos hablando. MIPS ha lanzado arquitecturas de 32 bits desde 1985 hasta la actualidad.

### Una breve justificación

¿Por qué aprender ensamblador de MIPS si probablemente nunca lo vamos a usar? ¿Y por qué justamente MIPS si nosotros tenemos a mano otras arquitecturas de CPU como x86 o ARM (en el celular)?

Programamos en ensamblador para entender como funciona una computadora, especialmente la CPU. Y a la hora de elegir un conjunto de instrucciones es más fácil empezar con una arquitectura que se pudo dar el lujo de aprender de los errores de otros. El conjunto de instrucciones de x86 se podría decir que es caótico comparado con una arquitectura RISC como MIPS. Esto es una consecuencia de su éxito comercial, Intel tuvo que extender su arquitectura y a la vez mantener compatibilidad con el código ya existente. Las arquitecturas de tipo RISC que surgieron en los años '80 se podían dar el lujo de buscar un diseño más elegante y simple. Esta simplicidad además facilita el diseño del _hardware_ y las hace más fácil de entender.

`TODO: Revisar esta intro, sobre todo RISC vs CISC`

## SPIM

Para programar en MIPS vamos a usar un simulador llamado SPIM. La última versión de este programa a veces aparece nombrado como QtSPIM, es lo mismo. Lo pueden descargar desde el [sitio oficial](http://spimsimulator.sourceforge.net/).

`TODO: Explicar un poco la interfaz de SPIM`

## Hello world

`TODO: como escribir un programa y ejecutarlo en SPIM`


## Directivas y memory layout

Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

## Registros en MIPS

Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
