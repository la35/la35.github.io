---
layout: post
title:  "Condicionales y loops en C"
author: "Santiago Trini"
categories: c
tags: [algo,c]
image: loop.png
date:   2021-05-06 00:00:00 -0300
---

Los programas que vimos hasta ahora ejecutaban cada uno de sus enunciados de manera secuencial. Uno atrás del otro, en el orden que aparecían en el código. La mayoría de los programas reales pueden variar la cantidad de veces que ejecutan un enunciado o el orden de los mismos.

Las **estructuras de control** de un lenguaje de programación son el mecanismo que nos permite alterar el orden y la cantidad de veces que ejecutamos un conjunto de enunciados.

La estructura **condicional** nos permite ejecutar un grupo de enunciados u otro en base a una condición. Los **ciclos** o _loops_ nos permiten repetir un grupo de enunciados, dependiendo de que se cumpla una condición dada.  

## Condicionales

Supongamos que queremos ejecutar un enunciado o enunciados solo si se cumple una condición lógica. Por ejemplo si queremos calcular el valor absoluto de un número entero tenemos que cambiar el signo del número solo si es menor a cero.

Un enunciado `if (<expresión>) { <enunciados> }` es el mecanismo que C nos da para hacer esto. Lo que aparece entre `<>` es una plantilla, se reemplaza por alguna expresión o enunciados válidos. El fragmento de código que corresponde al ejemplo del valor absoluto quedaría como sigue.

```c
// x es una variable de tipo int
if (x < 0) { x = -x; }
// podemos omitir las llaves si hay un solo enunciado
if (x < 0) x = -x;
```

La condición que sigue a `if` es una expresión que puede ser verdadera o falsa. En C esto se puede hacer con los operadores relacionales como `<`, `>`, `==`, `<=`, `>=` y `!=`. También podemos usar variables de tipo `bool` con 0 representando falso y 1 verdadero.

Los condicionales pueden llevar también un `else`, de manera general.

```c
if (<condicion>) {
  <enunciados si es verdadera>
} else {
  <enunciados si es falsa>
}
```

El siguiente ejemplo ilustra este uso de los condicionales en un programa que simula tirar una moneda e imprime "Cara" o "Ceca" usando la función `rand()` para generar un número aleatorio. Nuevamente, las llaves son necesarias cuando tenemos más de un enunciado.

```c
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main(void) {
  srand(time(NULL));
  if ((rand() % 2) < 1)
    printf("Cara\n");
  else
    printf("Ceca\n");
  return 0;
}
```

También podemos encadenar condicionales agregando un nuevo `if ... else` después de un `else`.

```
if (<condicion 1>) {
  <enunciados 1>
} else if (<condicion 2>) {
  <enunciados 2>
} else if (<condicion 3>) {
  <enunciados 3>
} else {
  <enunciados 4>
}
```

En la estructura de arriba si la primera condición se cumple se ejecutan los primeros enunciados y solo esos. Si no se evalúa la segunda condición y si fuera verdadera se ejecuta el segundo grupo de enunciados y así. Si ninguna de las condiciones fuera verdadera se ejecuta el grupo de enunciados después del último `else`, en este caso `<enunciados 4>`.

## Loops

Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

```c
/*
 * loop.c
 * primer loop, usa un contador (i)
 * para controlar la cantidad de repeticiones
 */

#include <stdio.h>

#define TIMES 10

int main(void) {
  int i = 0;
  while (i < TIMES) {
    printf("%dº vuelta\n", i + 1);
    i = i + 1;
  }
  return 0;
}
```

```c
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[]) {
  int n = atoi(argv[1]);
  int power = 1;
  int i = 0;
  while (i <= n) {
    printf("2^%d = %d\n", i, power);
    power *= 2;
    i++;
  }
  return 0;
}
```

## For loops

Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

```c
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[]) {
  int n = atoi(argv[1]);
  /* for (int i = 1; i <= n; i++)
    printf("%d ", i);
  printf("\n"); */  
  for (int i = 1; i <= n; i++) {
    for (int j = 1; j <= n; j++) {
      if ((i % j == 0) || (j % i == 0))
        printf("* ");
      else
        printf("  ");
    }
    printf("%d\n", i);
  }
  return 0;
}
```

```c
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[]) {
  int n = atoi(argv[1]);
  double sum = 0.0;
  for (int i = 1; i <= n; i++) {
    sum += 1.0 / i;
  }
  printf("%f\n", sum);
  return 0;
}
```

```c
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

int main(int argc, char *argv[]) {
  double c = atof(argv[1]);
  double EPSILON = 1e-15;
  double t = c;
  while (fabs(t - c/t) > EPSILON * t)
    t = (c / t + t) / 2.0;
  printf("%f\n", t);
  return 0;
}
```

```c
/*
 * binary.c
 * acepta un argumento n y muestra
 * la representacion en base 2 de n
 */

#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[]) {
  int n = atoi(argv[1]);
  int power = 1;
  while (power <= n / 2)
    power *= 2;
  while (power > 0) {
    if (n < power) {
      printf("0");
    } else {
      printf("1");
      n -= power;
    }
    power /= 2;
  }
  printf("\n");
  return 0;
}
```

```c
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main(int argc, char *argv[]) {
  srand(time(NULL));
  int stake  = atoi(argv[1]);
  int goal   = atoi(argv[2]);
  int trials = atoi(argv[3]);
  int bets   = 0;
  int wins   = 0;
  for (int t = 0; t < trials; t++) {
    int cash = stake;
    while (cash > 0 && cash < goal) {
      bets++;
      if (rand() % 10 < 5) cash++;
      else                 cash--;
    }
    if (cash == goal) wins++;
  }
  printf("%d %% wins\n", 100 * wins / trials);
  printf("Avg # bets: %d\n", bets / trials);
  return 0;
}
```

```c
// factors.c
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[]) {
  long n = atoi(argv[1]);
  for (long factor = 2; factor <= n / factor; factor++) {
    while (n % factor == 0) {
      n /= factor;
      printf("%d ", factor);
    }
  }
  if (n > 1) printf("%d", n);
  printf("\n");
  return 0;
}
```
